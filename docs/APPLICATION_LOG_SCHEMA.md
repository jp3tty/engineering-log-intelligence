# Application Log Schema Documentation

**Version:** 1.0  
**Last Updated:** September 19, 2025  
**Generator:** ApplicationLogGenerator

## Overview

This document describes the schema and structure for application log entries generated by the Engineering Log Intelligence System. Application logs represent logs from web applications, microservices, APIs, and other application services.

## Log Entry Structure

### Basic Log Entry

```json
{
  "log_id": "application-1695123456789-000001",
  "timestamp": "2025-09-19T10:30:45.123Z",
  "level": "INFO",
  "message": "GET /api/users - 200 - 145.67ms",
  "application_type": "web_app",
  "framework": "Spring Boot",
  "http_method": "GET",
  "http_status": 200,
  "endpoint": "/api/users",
  "response_time_ms": 145.67,
  "request_id": "550e8400-e29b-41d4-a716-446655440000",
  "session_id": "sess_123456_7890",
  "correlation_id": "corr_1695123456789_1234",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",
  "ip_address": "192.168.1.100",
  "host": "web-server-01",
  "service": "webapp",
  "category": "application",
  "tags": ["application", "web_app", "api"],
  "metadata": {
    "generator": "application",
    "version": "1.0.0",
    "generated_at": "2025-09-19T10:30:45.123Z",
    "host": "web-server-01",
    "service": "webapp",
    "environment": "development"
  }
}
```

## Field Descriptions

### Core Fields

| Field | Type | Description | Example |
|-------|------|-------------|---------|
| `log_id` | string | Unique identifier for the log entry | `application-1695123456789-000001` |
| `timestamp` | string | ISO 8601 timestamp when the log was generated | `2025-09-19T10:30:45.123Z` |
| `level` | string | Log level (DEBUG, INFO, WARN, ERROR, FATAL) | `INFO` |
| `message` | string | Human-readable log message | `GET /api/users - 200 - 145.67ms` |

### Application Context

| Field | Type | Description | Example |
|-------|------|-------------|---------|
| `application_type` | string | Type of application | `web_app`, `microservice`, `api_gateway` |
| `framework` | string | Technology framework used | `Spring Boot`, `Django`, `FastAPI` |
| `http_method` | string | HTTP method used | `GET`, `POST`, `PUT`, `DELETE` |
| `http_status` | integer | HTTP response status code | `200`, `404`, `500` |
| `endpoint` | string | API endpoint path | `/api/users`, `/auth/login` |
| `response_time_ms` | float | Response time in milliseconds | `145.67` |

### Request Tracking

| Field | Type | Description | Example |
|-------|------|-------------|---------|
| `request_id` | string | Unique request identifier | `550e8400-e29b-41d4-a716-446655440000` |
| `session_id` | string | User session identifier | `sess_123456_7890` |
| `correlation_id` | string | Correlation ID for distributed tracing | `corr_1695123456789_1234` |
| `user_agent` | string | Client user agent string | `Mozilla/5.0 (Windows NT 10.0; Win64; x64)` |
| `ip_address` | string | Client IP address | `192.168.1.100` |

### Infrastructure

| Field | Type | Description | Example |
|-------|------|-------------|---------|
| `host` | string | Server hostname | `web-server-01` |
| `service` | string | Service name | `webapp`, `api`, `auth` |
| `category` | string | Log category | `application`, `security`, `performance` |
| `tags` | array | List of tags for categorization | `["application", "web_app", "api"]` |

## Error Details (When Applicable)

When `http_status >= 400`, additional error information is included:

```json
{
  "error_details": {
    "error_type": "validation_error",
    "error_message": "Invalid input parameters",
    "stack_trace": "at com.example.ValidationService.validateInput(ValidationService.java:45)\nat com.example.UserController.createUser(UserController.java:123)",
    "error_code": "ERR_400_1234"
  }
}
```

### Error Types

| Error Type | Description | Common Causes |
|------------|-------------|---------------|
| `validation_error` | Input validation failed | Invalid parameters, missing fields |
| `authentication_error` | Authentication failed | Invalid credentials, expired tokens |
| `authorization_error` | Access denied | Insufficient permissions |
| `database_error` | Database operation failed | Connection issues, query failures |
| `network_error` | Network communication failed | Timeouts, connection refused |
| `timeout_error` | Operation timed out | Slow external services |
| `resource_error` | System resource issues | Memory, CPU, disk space |
| `business_logic_error` | Business rule violation | Invalid state, workflow errors |

## Performance Metrics

```json
{
  "performance_metrics": {
    "response_time_ms": 145.67,
    "memory_usage_mb": 256.5,
    "cpu_usage_percent": 45.2,
    "thread_count": 25,
    "connection_count": 12
  }
}
```

### Performance Fields

| Field | Type | Description | Range |
|-------|------|-------------|-------|
| `response_time_ms` | float | HTTP response time in milliseconds | 1-10000 |
| `memory_usage_mb` | float | Memory usage in megabytes | 50-1000 |
| `cpu_usage_percent` | float | CPU usage percentage | 10-100 |
| `thread_count` | integer | Number of active threads | 10-100 |
| `connection_count` | integer | Number of active connections | 5-50 |

## Business Context

```json
{
  "business_context": {
    "user_id": "user_1234",
    "tenant_id": "tenant_5",
    "feature_flag": "feature_A",
    "experiment_group": "control"
  }
}
```

### Business Fields

| Field | Type | Description | Example |
|-------|------|-------------|---------|
| `user_id` | string | User identifier (if available) | `user_1234` |
| `tenant_id` | string | Tenant identifier (multi-tenant apps) | `tenant_5` |
| `feature_flag` | string | Feature flag name | `feature_A` |
| `experiment_group` | string | A/B testing group | `control`, `treatment` |

## Anomaly Detection

When an anomaly is detected, additional fields are added:

```json
{
  "anomaly_type": "unusual_response_time",
  "is_anomaly": true,
  "level": "WARN",
  "message": "UNUSUAL RESPONSE TIME: GET /api/users - 200 - 15000.0ms"
}
```

### Anomaly Types

| Anomaly Type | Description | Detection Criteria |
|--------------|-------------|-------------------|
| `unusual_response_time` | Response time significantly higher than normal | > 5 seconds |
| `high_error_rate` | High percentage of error responses | > 10% errors |
| `unusual_traffic_pattern` | Suspicious traffic patterns | Unusual IPs, user agents |
| `resource_exhaustion` | System resources running low | High memory/CPU usage |
| `security_incident` | Potential security breach | Failed auth attempts, suspicious activity |
| `data_corruption` | Data integrity issues | Checksum mismatches, format errors |

## Application Types

### Supported Application Types

| Type | Description | Common Endpoints |
|------|-------------|------------------|
| `web_app` | Traditional web application | `/api/users`, `/api/dashboard` |
| `microservice` | Microservice architecture | `/api/v1/users`, `/api/v1/orders` |
| `api_gateway` | API gateway service | `/gateway/auth`, `/gateway/users` |
| `database_service` | Database service | `/db/query`, `/db/transaction` |
| `auth_service` | Authentication service | `/auth/login`, `/auth/validate` |
| `notification_service` | Notification service | `/notify/email`, `/notify/sms` |
| `payment_service` | Payment processing | `/payments/process`, `/payments/refund` |
| `user_service` | User management | `/users/profile`, `/users/preferences` |

## HTTP Status Code Distribution

| Status Code | Description | Weight | Percentage |
|-------------|-------------|--------|------------|
| 200 | OK | 0.60 | 60% |
| 201 | Created | 0.10 | 10% |
| 204 | No Content | 0.05 | 5% |
| 400 | Bad Request | 0.05 | 5% |
| 401 | Unauthorized | 0.02 | 2% |
| 403 | Forbidden | 0.01 | 1% |
| 404 | Not Found | 0.05 | 5% |
| 422 | Unprocessable Entity | 0.02 | 2% |
| 429 | Too Many Requests | 0.01 | 1% |
| 500 | Internal Server Error | 0.03 | 3% |
| 502 | Bad Gateway | 0.02 | 2% |
| 503 | Service Unavailable | 0.02 | 2% |
| 504 | Gateway Timeout | 0.01 | 1% |

## Response Time Ranges

| Range | Description | Time (ms) | Weight |
|-------|-------------|-----------|--------|
| Fast | Quick responses | 1-100 | 60% |
| Normal | Typical responses | 100-500 | 30% |
| Slow | Delayed responses | 500-2000 | 8% |
| Very Slow | Problematic responses | 2000-10000 | 2% |

## Usage Examples

### Basic Log Generation

```python
from data_simulation.application_generator import ApplicationLogGenerator

# Initialize generator
config = {
    'application_types': ['web_app', 'microservice'],
    'frameworks': ['Spring Boot', 'Django'],
    'anomaly_rate': 0.05,
    'error_rate': 0.02
}

generator = ApplicationLogGenerator(config)

# Generate single log
log_entry = generator.generate_log()
print(log_entry['message'])  # "GET /api/users - 200 - 145.67ms"

# Generate batch
logs = generator.generate_batch(1000)
print(f"Generated {len(logs)} logs")
```

### Anomaly Detection

```python
# Generate anomaly
anomaly = generator.simulate_anomaly()
print(f"Anomaly type: {anomaly['anomaly_type']}")
print(f"Message: {anomaly['message']}")
```

### Performance Analysis

```python
# Filter logs by performance
slow_logs = [log for log in logs if log['response_time_ms'] > 1000]
print(f"Found {len(slow_logs)} slow requests")

# Analyze error rates
error_logs = [log for log in logs if log['http_status'] >= 400]
error_rate = len(error_logs) / len(logs) * 100
print(f"Error rate: {error_rate:.2f}%")
```

## Integration with Other Log Types

Application logs are designed to correlate with SPLUNK and SAP logs:

### Correlation Fields

- **`correlation_id`**: Links related requests across services
- **`request_id`**: Unique identifier for the request
- **`session_id`**: User session across all services
- **`ip_address`**: Client IP for security analysis
- **`timestamp`**: Precise timing for sequence analysis

### Cross-System Analysis

```python
# Example: Find all logs related to a specific request
request_id = "550e8400-e29b-41d4-a716-446655440000"

# Search across all log types
app_logs = [log for log in app_logs if log['request_id'] == request_id]
splunk_logs = [log for log in splunk_logs if log.get('request_id') == request_id]
sap_logs = [log for log in sap_logs if log.get('request_id') == request_id]

# Analyze the complete request flow
print(f"Request {request_id} generated {len(app_logs)} app logs, {len(splunk_logs)} SPLUNK logs, {len(sap_logs)} SAP logs")
```

## Configuration Options

### Generator Configuration

```python
config = {
    # Application types to generate
    'application_types': ['web_app', 'microservice', 'api_gateway'],
    
    # Frameworks to use
    'frameworks': ['Spring Boot', 'Django', 'FastAPI'],
    
    # Error and anomaly rates
    'anomaly_rate': 0.05,  # 5% anomalies
    'error_rate': 0.02,    # 2% errors
    
    # Environment settings
    'environment': 'development',
    
    # Host and service names
    'hosts': ['web-server-01', 'api-server-01'],
    'services': ['webapp', 'api', 'auth'],
    
    # Custom tags
    'random_tags': ['feature_x', 'experiment_y', 'region_us']
}
```

## Performance Characteristics

### Generation Speed

- **Target**: 50,000+ logs per second
- **Optimization**: Batch processing and efficient data structures
- **Memory Usage**: ~2MB per 10,000 logs
- **CPU Usage**: Minimal impact on system performance

### Data Quality

- **Realistic Patterns**: Based on real application log patterns
- **Proper Distribution**: HTTP status codes, response times, error types
- **Consistent Formatting**: All logs follow the same schema
- **Correlation Support**: Designed for cross-system analysis

## Monitoring and Alerting

### Key Metrics to Monitor

1. **Response Time**: Average, 95th percentile, maximum
2. **Error Rate**: Percentage of 4xx and 5xx responses
3. **Throughput**: Requests per second
4. **Resource Usage**: Memory, CPU, thread count
5. **Anomaly Rate**: Percentage of anomalous logs

### Alert Thresholds

- **Response Time**: > 2 seconds (WARN), > 5 seconds (ERROR)
- **Error Rate**: > 5% (WARN), > 10% (ERROR)
- **Memory Usage**: > 80% (WARN), > 95% (ERROR)
- **CPU Usage**: > 80% (WARN), > 95% (ERROR)

---

**This schema provides a comprehensive foundation for application log analysis, enabling effective monitoring, debugging, and performance optimization of modern application architectures.**
